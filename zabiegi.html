<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Umów się na zabieg</title>
  <meta name="description" content="Free Bootstrap Theme by BootstrapMade.com">
  <meta name="keywords" content="free website templates, free bootstrap themes, free template, free bootstrap, free website template">

  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Fira+Sans|Roboto:300,400|Questrial|Satisfy">
  <link rel="stylesheet" type="text/css" href="css/fonts.css">
  <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/animate.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css" class="ui" href="https://semantic-ui.com/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" class="ui" href="css/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="css/calendar.min.css" />

  <script src="js/jquery-2.1.4.js"></script>
  <script src="js/semantic.min.js"></script>
  <script src="js/calendar.js"></script>

  <script type="text/javascript" src="https://cdn.emailjs.com/sdk/2.1.0/email.min.js"></script>
  <script type="text/javascript">(function(){ emailjs.init("user_TuybsFctQQeHmUSgacGvH"); })();</script>

  <script>
  var chosen_service = null;
  var chosen_date = null;

  var service_descriptions = {
    'przedluzanie 1-1': 'Przedłużanie rzęs 1-1. Zabieg trwa około 3h.',
    'uzupelnianie 1-1': 'Uzupelnianie rzęs 1-1 (do 3 tygodni od ostatniej aplikacji). Zabieg trwa około 2.5h. <b>Uwaga</b>: nie uzupełniam rzęs po innych stylistkach, wtedy traktuję zabieg jako nową aplikację.',
    'przedluzanie 2-3d': 'Przedłużanie rzęs 2-3D. Zabieg trwa około 3.5h.',
    'uzupelnianie 2-3d': 'Uzupelnianie rzęs 2-3D (do 3 tygodni od ostatniej aplikacji). Zabieg trwa około 3h. <b>Uwaga</b>: nie uzupełniam rzęs po innych stylistkach, wtedy traktuję zabieg jako nową aplikację.',
    'przedluzanie 4-5d': 'Przedłużanie rzęs 4-5D. Zabieg trwa około 3.5h.',
    'uzupelnianie 4-5d': 'Uzupelnianie rzęs 4-5D (do 3 tygodni od ostatniej aplikacji). Zabieg trwa około 3h. <b>Uwaga</b>: nie uzupełniam rzęs po innych stylistkach, wtedy traktuję zabieg jako nową aplikację.',
    'usuniecie rzes': 'Zdejmowanie rzęs. Zabieg trwa około 30 minut.'
  }

  var choose_service = function(service) {
    chosen_service = service;
    $("#step2_desc").html(service_descriptions[service])
    $("#step3_desc").html(service_descriptions[service])
    switch_view("#step1", "#step2")
  }

  var switch_view = function(fromStep, toStep) {
    $(fromStep).fadeOut("slow", function() {
      $(toStep).fadeIn("slow")
    })
  }

  var back_to_calendar = function() {
    $('#example14').calendar('clear')
    switch_view('#step3','#step2')
  }

  var reservation = function(phone_number) {
    if (phone_number.length < 5 || Boolean(phone_number.match(/[A-z]/g))) {
      $("#phone").css("border", "1px solid #f00")
      alert("Wpisano niepoprawny numer telefonu")
      return
    }

    var template_params = {
      chosen_service: chosen_service,
      chosen_date: chosen_date,
      phone_number: phone_number
    };

    $("#reservation_button").addClass("loading disabled")

    emailjs.send('mailgun', 'umowienie_wizyty', template_params).then(function(response) {
         console.log('SUCCESS!', response.status, response.text);
         switch_view("#step3", "#step_success")
      }, function(error) {
         console.log('FAILED...', error);
         switch_view("#step3", "#step_failure")
      });
  }
  </script>

</head>

<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">

  <section id="logo" style="text-align: center; padding: 20px">
    <img src="img/logo.png" width="170" />
  </section>

  <section id="about" class="section-padding wow fadeIn delay-05s">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-right" style="margin-top: 30px">

          <div id="step1" style="display: block">
            <h2 class="title-text">
              <a class="ui pink label" style="vertical-align: middle; margin-right: 20px">Krok 1/3</a>
              Jaki zabieg rzęs Ciebie interesuje? 
            </h2>
            <br />
            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('przedluzanie 1-1')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Przedłużanie 1:1
              </div>
              <a class="ui basic teal left pointing label" style="width: 32%;">
                <span style="color: #e03997; font-weight: 100">100 zł (3h)</span>
              </a>
            </div>

            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('uzupelnianie 1-1')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Uzupełnianie 1:1
              </div>
              <a class="ui basic teal left pointing label"  style="width: 32%">
                <span style="color: #e03997; font-weight: 100">80 zł (2.5h)</span>
              </a>
            </div><br />

            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('przedluzanie 2-3d')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Przedłużanie 2-3D
              </div>
              <a class="ui basic teal left pointing label" style="width: 32%">
                <span style="color: #e03997; font-weight: 100">120 zł (3.5h)</span>
              </a>
            </div>

            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('uzupelnianie 2-3d')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Uzupełnianie 2-3D
              </div>
              <a class="ui basic teal left pointing label" style="width: 32%">
                <span style="color: #e03997; font-weight: 100">100 zł (3h)</span>
              </a>
            </div><br />

            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('przedluzanie 4-5d')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Przedłużanie 4-5D
              </div>
              <a class="ui basic teal left pointing label" style="width: 32%">
                <span style="color: #e03997; font-weight: 100">150 zł (3.5h)</span>
              </a>
            </div>

            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('uzupelnianie 4-5d')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Uzupełnianie 4-5D
              </div>
              <a class="ui basic teal left pointing label" style="width: 32%">
                <span style="color: #e03997; font-weight: 100">120 zł (3.5h)</span>
              </a>
            </div><br />

            <div class="ui labeled button" style="margin: 10px; width: 330px" onclick="choose_service('usuniecie rzes')">
              <div class="ui large teal button" style="width: 68%; text-align: left">
                <i class="heart icon"></i> Zdejmowanie rzęs
              </div>
              <a class="ui basic teal left pointing label" style="width: 32%">
                <span style="color: #e03997; font-weight: 100">30 zł (0.5h)</span>
              </a>
            </div><br />

          </div> 


          <div id="step2" style="display: none; text-align: right">
            <h2 class="title-text">
              <a class="ui pink label" style="vertical-align: middle; margin-right: 20px">Krok 2/3</a>
              Wybierz termin zabiegu
            </h2>
            <br />

            <div style="width: 400px; float: right">
             <div class="ui calendar" id="example14"></div>
            </div>
            <div style="width: 400px; float: right">
             <button class="ui small labeled icon button" onclick="switch_view('#step2','#step1')">
              <i class="left arrow icon"></i>
              Cofnij
             </button>
             <br />
             <div style="padding: 10px; margin-top:30px; text-align: center">
             <b>Wybrany zabieg:</b><br /> <span id="step2_desc"></span>
             </div>
            </div>
          </div>


          <div id="step3" style="display: none; text-align: right">
            <h2 class="title-text">
              <a class="ui pink label" style="vertical-align: middle; margin-right: 20px">Krok 3/3</a>
              Potwierdź wizytę
            </h2>
            <br />

            <div style="width: 400px; float: right; text-align: left">
             <b>Wybrany zabieg:</b><br /> <span id="step3_desc"></span> <br /><br />
             <b>Wybrany termin:</b><br /> <span id="step3_date"></span> <br /><br />
             
             <b>Podaj swój numer telefonu:</b> <br /><br />

             <div class="ui left icon big input" style="width: 100%; margin-bottom: 10px;">
               <input type="text" id="phone">
               <i class="phone icon"></i>
             </div>

             <button id="reservation_button" class="ui big labeled teal icon button" style="width: 100%" onclick="reservation($('#phone').val())">
              <i class="calendar check outline icon"></i>
              Zarezerwuj wizytę
             </button>
            </div>
            <div style="width: 400px; float: right">
             <button class="ui small labeled icon button" onclick="back_to_calendar()">
              <i class="left arrow icon"></i>
              Cofnij
             </button>
            </div>
          </div>


          <div id="step_success" style="display: none; text-align: right">
            <h2 class="title-text">
              Dziękuję!
            </h2>
            <br />

            <div style="width: 400px; float: right; text-align: center; font-size: 1.5em; font-weight: 100">
              Prośba o rezerwację wizyty została do mnie wysłana.
              <span style="color: #e61a8d">Dzisiaj</span> skontaktuję się z Tobą z potwierdzeniem umówienia wizyty!
              <br /><br /><br />
              <span style="font-size: 2em">
                <i class="phone volume icon"></i>
                <i class="mobile alternate icon"></i>
                <i class="comment outline icon"></i>
              </span>
            </div>
          </div>

          <div id="step_failure" style="display: none; text-align: right">
            <h2 class="title-text">
              Wystąpił błąd <i class="frown outline icon"></i>
            </h2>
            <br />

            <div style="width: 400px; float: right; text-align: center; font-size: 1.5em; font-weight: 100">
              Niestety wystąpił nieoczekiwany błąd podczas wysyłania wiadomości.<br /><br />
              Proszę o kontakt poprzez sms:<br /><span style="color: #e61a8d">+48 881 378 603</span><br /><br />
              lub wiadomość email:<br /><span style="color: #e61a8d">joanna.efektmotyla@gmail.com</span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
  <section id="contact" style="margin-top: 0">
    <div class="container">
      <div class="row">
        <div class="col-md-12" style="color: #fff; text-align: center; padding: 50px">

          <div class="ui horizontal list" style="margin-top: 20px">
            <div class="item">
              <i class="phone icon"></i>
              <div class="content" style="font-size: 1.5em; font-weight: 100">
                <a href="tel:+48881378603" style="color: #fff">+48 881 378 603</a>
              </div>
            </div>
            <div class="item">
              <i class="marker icon"></i>
              <div class="content" style="font-size: 1.5em; font-weight: 100">
                Al. Waszyngtona 33, Warszawa, Praga Południe
              </div>
            </div>
          </div>

          <div class="ui small images" style="margin-top: 30px">
            <img src="img/portfolio04.jpg" style="margin: 30px; border: 1px dashed #009c95; padding: 2px; background: #fff">
            <img src="img/portfolio06.jpg" style="margin: 30px; border: 1px dashed #009c95; padding: 2px; background: #fff">
            <img src="img/portfolio08.jpg" style="margin: 30px; border: 1px dashed #009c95; padding: 2px; background: #fff">
            <img src="img/portfolio07.jpg" style="margin: 30px; border: 1px dashed #009c95; padding: 2px; background: #fff">
            <img src="img/portfolio05.jpg" style="margin: 30px; border: 1px dashed #009c95; padding: 2px; background: #fff">
          </div>

        </div>
      </div>
    </div>
  </section>

<script>
const months_fullnames = ['Styczeń','Luty','Marzec','Kwiecień','Maj','Czerwiec','Lipiec','Sierpień','Wrzesień','Październik','Listopad','Grudzień'];

var is_day_available = function(dates, year, month, day) {
  const month_name = months_fullnames[month];
  return dates[year] !== undefined &&
         dates[year][month_name] !== undefined &&
         dates[year][month_name][day] !== undefined
}

var is_hour_available = function(dates, year, month, day, hour) {
  const month_name = months_fullnames[month];
  return dates[year] !== undefined &&
         dates[year][month_name] !== undefined &&
         dates[year][month_name][day] !== undefined &&
         dates[year][month_name][day].includes(hour)
}

$.getJSON('dates.json').done(function(json) {
  const dates = json.available_dates;

  $('#example14').calendar({
    inline: true,
    disableMinute: true,
    disableYear: true,
    disableMonth: true,
    ampm: false,
    text: {
        days: ['Nie', 'Pon', 'Wto', 'Śro', 'Czw', 'Pt', 'Sob'],
        months: months_fullnames,
        monthsShort: ['Sty','Lut','Mar','Kwi','Maj','Cze','Lip','Sie','Wrz','Paź','Lis','Gru'],
        today: 'Dzisiaj',
        now: 'Teraz',
        am: 'AM',
        pm: 'PM'
      },
    formatter: {
      cell: function (cell, date, cellOptions) {
        
        var is_available = is_day_available(dates, date.getFullYear(), date.getMonth(), date.getDate()) &&
                           (cellOptions.mode != "hour" || is_hour_available(dates, date.getFullYear(), date.getMonth(), date.getDate(), date.getHours()))

        if (is_available) {
          cell.toggleClass('disabled', false)
          cell.toggleClass('available-date', true)
        } else {
          cell.toggleClass('disabled', true)
          cell.toggleClass('available-date', false)
        }

        if (cellOptions.active) {
          chosen_date = date.toLocaleString("pl-PL");
          $("#step3_date").html(chosen_date)
          switch_view("#step2", "#step3")
        }
      }
    },
    className: {
        activeCell: 'chosen-date'
    }
  });

}).fail(function( jqxhr, textStatus, error ) {
  console.log("Request Failed: " + textStatus + ", " + error);
});

</script>

  <script src="js/jquery.easing.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/wow.js"></script>
  <script src="js/custom.js"></script>

</body>

</html>
